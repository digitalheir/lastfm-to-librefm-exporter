!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=27)}({1:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),o=r(7),u=r(2),i=r(3),a=r(5),c=r(4);t.urlGetToken=function(e,r,n){var o=[["method","auth.getToken"],["api_key",r]];return e+"?"+i.urlEncodeParams(o)+"&api_sig="+t.constructSignatureForParams(o,n)+"&format=json"},t.connectApplication=function(e,t,r){return e+"auth/?api_key="+(r?t+"&cb="+encodeURIComponent(r):t)},t.createSessionUrl=function(e,r,n,o){var u=[["api_key",r],["method","auth.getSession"],["token",n]];return e+"?"+i.urlEncodeParams(u)+"&api_sig="+t.constructSignatureForParams(u,o)+"&format=json"};var s=function(e,t,r){r&&e.push([t,r])},f=function(e,t,r){s(e,"artist["+r+"]",t.artist),s(e,"track["+r+"]",t.track),s(e,"timestamp["+r+"]",t.timestamp.toString()),s(e,"album["+r+"]",t.album),s(e,"trackNumber["+r+"]",t.trackNumber),s(e,"mbid["+r+"]",t.mbid),s(e,"duration["+r+"]",t.duration)};function l(e,r,n,o){var u=[];e.forEach(function(e,t){return f(u,e,t)});u.push(["method","track.scrobble"]),u.push(["api_key",r]),u.push(["sk",n]);var i=new FormData;return u.forEach(function(e){return i.append(e[0],e[1])}),i.append("api_sig",t.constructSignatureForParams(u,o)),i}t.createScrobbleFormData=l,t.scrobbleTracks=function(e,t,r,n,o){var i=l(o,t,r,n),a=u.makePostRequest(e,i,function(){alert(a.responseText)},function(){alert(a.responseText)})};t.constructSignatureForParams=function(e,t){return n.md5hash(""+function(e){return e.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0})}(e).map(function(e){return e[0]+e[1]})+t)},t.getUserProfileUrl=function(e,t){return"Libre.fm"===e?"https://libre.fm/user/"+t:"https://www.last.fm/user/"+t},t.apiEndpointFor=function(e){return"Libre.fm"===e?c.libre2_0:a.last2_0},t.apiAuthEndpointFor=function(e){return"Libre.fm"===e?c.libreApi:a.lastApi},t.createScrobbleForm=function(e,r,n,u,i,a){var c=document.createElement("form");c.target=e,c.method="post",c.action=t.apiEndpointFor(r);var s=document.createElement("input");s.type="submit",s.value="Retry scrobbling "+a.length+" tracks to "+r,c.appendChild(s),l(o.convertToLibreScrobbles(a),n,u,i).forEach(function(e,t){var r=document.createElement("input");r.type="hidden",r.value=e.toString(),r.name=t,c.appendChild(r)});var f=document.createElement("input");return f.type="hidden",f.value="json",f.name="format",c.appendChild(f),{form:c,submit:s}}},2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRequest=function(e,t,r){var n=new XMLHttpRequest;return n.overrideMimeType("application/json"),n.open("GET",e,!0),r&&(n.onerror=r),t&&(n.onload=t),n},t.makeGetRequest=function(e,t,r){var n=new XMLHttpRequest;return n.overrideMimeType("application/json"),n.open("GET",e,!0),r&&(n.onerror=r),t&&(n.onload=t),n.send(null),n},t.makePostRequest=function(e,t,r,n){var o=new XMLHttpRequest;return o.overrideMimeType("application/json"),o.open("POST",e,!0),n&&(o.onerror=n),r&&(o.onload=r),o.send(t),o}},27:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),o=r(1),u=r(2),i=r(4),a=document.getElementById("mount-point"),c=window?window.location:null,s=n.parseUrlParams(c?c.search:null);var f=function(e){var t=document.createElement("div");return t.innerText=e,t};if(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=!0;return e.forEach(function(e){s[e]||(alert("Expected parameter "+e),r=!1)}),r}("lastfm_user","lastfm_api_key","librefm_api_key","librefm_user","librefm_secret","token")&&a){var l=o.createSessionUrl(i.libre2_0,s.librefm_api_key,s.token,s.librefm_secret),p=document.createElement("div");p.innerHTML='Creating session (<a href="'+l+'">'+l+"</a>)",a.appendChild(p),u.makeGetRequest(l,function(){var e=JSON.parse(this.responseText);e&&e.key?a.appendChild(f("Could not create session: "+e.error)):a.appendChild(function(e){var t=document.createElement("div");return t.innerText=e,t}("Created session with session key "+e.key))},function(){a.appendChild(f("Could not create session"))})}},3:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitArray=function(e,t){var r=[],n=[];return r.push(n),e.forEach(function(e){n.length>=t&&(n=[],r.push(n)),n.push(e)}),r},t.urlEncodeParams=function(e,t){return void 0===t&&(t=!1),e.map(function(e){return e[0]+"="+(t?encodeURIComponent(e[1]):e[1])}).join("&")}},4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.libreApi="https://libre.fm/api/",t.libre2_0="https://libre.fm/2.0/",t.default_key="r9i1y91hz71tcx7vyrp9hk1alhqp1888",t.default_secret="21dsgf56dfg13df5g46sd85769gt45fd"},5:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lastApi="https://www.last.fm/api/",t.last2_0="https://ws.audioscrobbler.com/2.0/"},6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=0;function o(e){return c(s(a(e),8*e.length))}function u(e){for(var t,r=n?"0123456789ABCDEF":"0123456789abcdef",o="",u=0;u<e.length;u++)t=e.charCodeAt(u),o+=r.charAt(t>>>4&15)+r.charAt(15&t);return o}function i(e){for(var t,r,n="",o=-1;++o<e.length;)t=e.charCodeAt(o),r=o+1<e.length?e.charCodeAt(o+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),o++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function a(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function c(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(String.fromCharCode(e[r>>5]>>>r%32&255));return t.join("")}function s(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,o=-1732584194,u=271733878,i=0;i<e.length;i+=16){var a=r,c=n,s=o,f=u;r=l(r,n,o,u,e[i],7,-680876936),u=l(u,r,n,o,e[i+1],12,-389564586),o=l(o,u,r,n,e[i+2],17,606105819),n=l(n,o,u,r,e[i+3],22,-1044525330),r=l(r,n,o,u,e[i+4],7,-176418897),u=l(u,r,n,o,e[i+5],12,1200080426),o=l(o,u,r,n,e[i+6],17,-1473231341),n=l(n,o,u,r,e[i+7],22,-45705983),r=l(r,n,o,u,e[i+8],7,1770035416),u=l(u,r,n,o,e[i+9],12,-1958414417),o=l(o,u,r,n,e[i+10],17,-42063),n=l(n,o,u,r,e[i+11],22,-1990404162),r=l(r,n,o,u,e[i+12],7,1804603682),u=l(u,r,n,o,e[i+13],12,-40341101),o=l(o,u,r,n,e[i+14],17,-1502002290),n=l(n,o,u,r,e[i+15],22,1236535329),r=p(r,n,o,u,e[i+1],5,-165796510),u=p(u,r,n,o,e[i+6],9,-1069501632),o=p(o,u,r,n,e[i+11],14,643717713),n=p(n,o,u,r,e[i],20,-373897302),r=p(r,n,o,u,e[i+5],5,-701558691),u=p(u,r,n,o,e[i+10],9,38016083),o=p(o,u,r,n,e[i+15],14,-660478335),n=p(n,o,u,r,e[i+4],20,-405537848),r=p(r,n,o,u,e[i+9],5,568446438),u=p(u,r,n,o,e[i+14],9,-1019803690),o=p(o,u,r,n,e[i+3],14,-187363961),n=p(n,o,u,r,e[i+8],20,1163531501),r=p(r,n,o,u,e[i+13],5,-1444681467),u=p(u,r,n,o,e[i+2],9,-51403784),o=p(o,u,r,n,e[i+7],14,1735328473),n=p(n,o,u,r,e[i+12],20,-1926607734),r=d(r,n,o,u,e[i+5],4,-378558),u=d(u,r,n,o,e[i+8],11,-2022574463),o=d(o,u,r,n,e[i+11],16,1839030562),n=d(n,o,u,r,e[i+14],23,-35309556),r=d(r,n,o,u,e[i+1],4,-1530992060),u=d(u,r,n,o,e[i+4],11,1272893353),o=d(o,u,r,n,e[i+7],16,-155497632),n=d(n,o,u,r,e[i+10],23,-1094730640),r=d(r,n,o,u,e[i+13],4,681279174),u=d(u,r,n,o,e[i],11,-358537222),o=d(o,u,r,n,e[i+3],16,-722521979),n=d(n,o,u,r,e[i+6],23,76029189),r=d(r,n,o,u,e[i+9],4,-640364487),u=d(u,r,n,o,e[i+12],11,-421815835),o=d(o,u,r,n,e[i+15],16,530742520),n=d(n,o,u,r,e[i+2],23,-995338651),r=m(r,n,o,u,e[i],6,-198630844),u=m(u,r,n,o,e[i+7],10,1126891415),o=m(o,u,r,n,e[i+14],15,-1416354905),n=m(n,o,u,r,e[i+5],21,-57434055),r=m(r,n,o,u,e[i+12],6,1700485571),u=m(u,r,n,o,e[i+3],10,-1894986606),o=m(o,u,r,n,e[i+10],15,-1051523),n=m(n,o,u,r,e[i+1],21,-2054922799),r=m(r,n,o,u,e[i+8],6,1873313359),u=m(u,r,n,o,e[i+15],10,-30611744),o=m(o,u,r,n,e[i+6],15,-1560198380),n=m(n,o,u,r,e[i+13],21,1309151649),r=m(r,n,o,u,e[i+4],6,-145523070),u=m(u,r,n,o,e[i+11],10,-1120210379),o=m(o,u,r,n,e[i+2],15,718787259),n=m(n,o,u,r,e[i+9],21,-343485551),r=b(r,a),n=b(n,c),o=b(o,s),u=b(u,f)}return Array(r,n,o,u)}t.md5hash=function(e){return u(o(i(e)))};var f=function(e,t,r,n,o,u){return b(h(b(b(t,e),b(n,u)),o),r)},l=function(e,t,r,n,o,u,i){return f(t&r|~t&n,e,t,o,u,i)},p=function(e,t,r,n,o,u,i){return f(t&n|r&~n,e,t,o,u,i)},d=function(e,t,r,n,o,u,i){return f(t^r^n,e,t,o,u,i)},m=function(e,t,r,n,o,u,i){return f(r^(t|~n),e,t,o,u,i)},b=function(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r},h=function(e,t){return e<<t|e>>>32-t}},7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.convertToLibreScrobbles=function(e){return e.map(function(e){return function(e,t,r,n,o,u,i){return{timestamp:e,track:t,artist:r,album:n,mbid:o,duration:u,trackNumber:i}}(e.uts,e.name,e.artist&&e.artist.name||"",e.album&&e.album.name,e.mbid,e.duration,e.trackNumber)})}},8:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(/\s+/g,""))};t.parseUrlParams=function(e){if(e){for(var t={},r=e.substring(1),u=void 0;u=n.exec(r);)t[o(u[1])]=o(u[2]);return t}return{}},t.getCurrentHostName=function(e){if(!e)return"";var t=e.location;return t&&t.hostname||""}}})});
//# sourceMappingURL=synchronize.js.map