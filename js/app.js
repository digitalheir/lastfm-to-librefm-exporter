!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),a=n(1);t.urlGetToken=function(e,n,r){var a=[["method","auth.getToken"],["api_key",n]];return e+"?"+o(a)+"&api_sig="+t.constructSignatureForParams(a,r)+"&format=json"},t.connectApplication=function(e,t,n){return e+"auth/?api_key="+(n?t+"&cb="+encodeURIComponent(n):t)};var o=function(e){return e.map(function(e){return e[0]+"="+e[1]}).join("&")};t.createSessionUrl=function(e,n,r,a){var i=[["api_key",n],["method","auth.getSession"],["token",r]];return e+"?"+o(i)+"&api_sig="+t.constructSignatureForParams(i,a)+"&format=json"};var i=function(e,t,n){n&&e.push([t,n])},s=function(e,t,n){i(e,"artist["+n+"]",t.artist),i(e,"track["+n+"]",t.track),i(e,"timestamp["+n+"]",t.timestamp.toString()),i(e,"album["+n+"]",t.album),i(e,"trackNumber["+n+"]",t.trackNumber),i(e,"mbid["+n+"]",t.mbid),i(e,"duration["+n+"]",t.duration)};function l(e,n,r,a){var o=[];e.forEach(function(e,t){return s(o,e,t)});o.push(["method","track.scrobble"]),o.push(["api_key",n]),o.push(["sk",r]);var i=new FormData;return o.forEach(function(e){return i.append(e[0],e[1])}),i.append("api_sig",t.constructSignatureForParams(o,a)),i}t.createScrobbleFormData=l,t.scrobbleTracks=function(e,t,n,r,o){var i=l(o,t,n,r),s=a.makePostRequest(e,i,function(){alert(s.responseText)},function(){alert(s.responseText)})};t.constructSignatureForParams=function(e,t){return r.md5hash(""+function(e){return e.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0})}(e).map(function(e){return e[0]+e[1]})+t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRequest=function(e,t,n){var r=new XMLHttpRequest;return r.overrideMimeType("application/json"),r.open("GET",e,!0),n&&(r.onerror=n),t&&(r.onload=t),r},t.makeGetRequest=function(e,t,n){var r=new XMLHttpRequest;return r.overrideMimeType("application/json"),r.open("GET",e,!0),n&&(r.onerror=n),t&&(r.onload=t),r.send(null),r},t.makePostRequest=function(e,t,n,r){var a=new XMLHttpRequest;return a.overrideMimeType("application/json"),a.open("POST",e,!0),r&&(a.onerror=r),n&&(a.onload=n),a.send(t),a}},function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),o=function(){},i={},s=[],l=[];function u(e,t){var n,r,a,u,c=l;for(u=arguments.length;u-- >2;)s.push(arguments[u]);for(t&&null!=t.children&&(s.length||s.push(t.children),delete t.children);s.length;)if((r=s.pop())&&void 0!==r.pop)for(u=r.length;u--;)s.push(r[u]);else"boolean"==typeof r&&(r=null),(a="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(a=!1)),a&&n?c[c.length-1]+=r:c===l?c=[r]:c.push(r),n=a;var p=new o;return p.nodeName=e,p.children=c,p.attributes=null==t?void 0:t,p.key=null==t?void 0:t.key,void 0!==i.vnode&&i.vnode(p),p}function c(e,t){for(var n in t)e[n]=t[n];return e}var p="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function d(e,t){return u(e.nodeName,c(c({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,m=[];function h(e){!e._dirty&&(e._dirty=!0)&&1==m.push(e)&&(i.debounceRendering||p)(b)}function b(){var e,t=m;for(m=[];e=t.pop();)e._dirty&&U(e)}function v(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&y(e,t.nodeName):n||e._componentConstructor===t.nodeName}function y(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function g(e){var t=c({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function _(e){var t=e.parentNode;t&&t.removeChild(e)}function k(e,t,n,r,a){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||a)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var o in n)o in r||(e.style[o]="");for(var o in r)e.style[o]="number"==typeof r[o]&&!1===f.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var i=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,P,i):e.removeEventListener(t,P,i),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!a&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var s=a&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function P(e){return this._listeners[e.type](i.event&&i.event(e)||e)}var E=[],C=0,S=!1,N=!1;function x(){for(var e;e=E.pop();)i.afterMount&&i.afterMount(e),e.componentDidMount&&e.componentDidMount()}function w(e,t,n,r,a,o){C++||(S=null!=a&&void 0!==a.ownerSVGElement,N=null!=e&&!("__preactattr_"in e));var i=A(e,t,n,r,o);return a&&i.parentNode!==a&&a.appendChild(i),--C||(N=!1,o||x()),i}function A(e,t,n,r,a){var o=e,i=S;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||a)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),F(e,!0))),o.__preactattr_=!0,o;var s=t.nodeName;if("function"==typeof s)return function(e,t,n,r){var a=e&&e._component,o=a,i=e,s=a&&e._componentConstructor===t.nodeName,l=s,u=g(t);for(;a&&!l&&(a=a._parentComponent);)l=a.constructor===t.nodeName;a&&l&&(!r||a._component)?(M(a,u,3,n,r),e=a.base):(o&&!s&&(V(o),e=i=null),a=L(t.nodeName,u,n),e&&!a.nextBase&&(a.nextBase=e,i=null),M(a,u,1,n,r),e=a.base,i&&e!==i&&(i._component=null,F(i,!1)));return e}(e,t,n,r);if(S="svg"===s||"foreignObject"!==s&&S,s=String(s),(!e||!y(e,s))&&(o=function(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(s,S),e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),F(e,!0)}var l=o.firstChild,u=o.__preactattr_,c=t.children;if(null==u){u=o.__preactattr_={};for(var p=o.attributes,d=p.length;d--;)u[p[d].name]=p[d].value}return!N&&c&&1===c.length&&"string"==typeof c[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=c[0]&&(l.nodeValue=c[0]):(c&&c.length||null!=l)&&function(e,t,n,r,a){var o,i,s,l,u,c=e.childNodes,p=[],d={},f=0,m=0,h=c.length,b=0,y=t?t.length:0;if(0!==h)for(var g=0;g<h;g++){var k=c[g],P=k.__preactattr_,E=y&&P?k._component?k._component.__key:P.key:null;null!=E?(f++,d[E]=k):(P||(void 0!==k.splitText?!a||k.nodeValue.trim():a))&&(p[b++]=k)}if(0!==y)for(var g=0;g<y;g++){l=t[g],u=null;var E=l.key;if(null!=E)f&&void 0!==d[E]&&(u=d[E],d[E]=void 0,f--);else if(m<b)for(o=m;o<b;o++)if(void 0!==p[o]&&v(i=p[o],l,a)){u=i,p[o]=void 0,o===b-1&&b--,o===m&&m++;break}u=A(u,l,n,r),s=c[g],u&&u!==e&&u!==s&&(null==s?e.appendChild(u):u===s.nextSibling?_(s):e.insertBefore(u,s))}if(f)for(var g in d)void 0!==d[g]&&F(d[g],!1);for(;m<=b;)void 0!==(u=p[b--])&&F(u,!1)}(o,c,n,r,N||null!=u.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||k(e,r,n[r],n[r]=void 0,S);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||k(e,r,n[r],n[r]=t[r],S)}(o,t.attributes,u),S=i,o}function F(e,t){var n=e._component;n?V(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||_(e),T(e))}function T(e){for(e=e.lastChild;e;){var t=e.previousSibling;F(e,!0),e=t}}var O=[];function L(e,t,n){var r,a=O.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),R.call(r,t,n)):((r=new R(t,n)).constructor=e,r.render=j);a--;)if(O[a].constructor===e)return r.nextBase=O[a].nextBase,O.splice(a,1),r;return r}function j(e,t,n){return this.constructor(e,n)}function M(e,t,n,r,a){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===i.syncComponentUpdates&&e.base?h(e):U(e,1,a)),e.__ref&&e.__ref(e))}function U(e,t,n,r){if(!e._disable){var a,o,s,l=e.props,u=e.state,p=e.context,d=e.prevProps||l,f=e.prevState||u,m=e.prevContext||p,h=e.base,b=e.nextBase,v=h||b,y=e._component,_=!1,k=m;if(e.constructor.getDerivedStateFromProps&&(u=c(c({},u),e.constructor.getDerivedStateFromProps(l,u)),e.state=u),h&&(e.props=d,e.state=f,e.context=m,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(l,u,p)?_=!0:e.componentWillUpdate&&e.componentWillUpdate(l,u,p),e.props=l,e.state=u,e.context=p),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!_){a=e.render(l,u,p),e.getChildContext&&(p=c(c({},p),e.getChildContext())),h&&e.getSnapshotBeforeUpdate&&(k=e.getSnapshotBeforeUpdate(d,f));var P,S,N=a&&a.nodeName;if("function"==typeof N){var A=g(a);(o=y)&&o.constructor===N&&A.key==o.__key?M(o,A,1,p,!1):(P=o,e._component=o=L(N,A,p),o.nextBase=o.nextBase||b,o._parentComponent=e,M(o,A,0,p,!1),U(o,1,n,!0)),S=o.base}else s=v,(P=y)&&(s=e._component=null),(v||1===t)&&(s&&(s._component=null),S=w(s,a,p,n||!h,v&&v.parentNode,!0));if(v&&S!==v&&o!==y){var T=v.parentNode;T&&S!==T&&(T.replaceChild(S,v),P||(v._component=null,F(v,!1)))}if(P&&V(P),e.base=S,S&&!r){for(var O=e,j=e;j=j._parentComponent;)(O=j).base=S;S._component=O,S._componentConstructor=O.constructor}}for(!h||n?E.unshift(e):_||(e.componentDidUpdate&&e.componentDidUpdate(d,f,k),i.afterUpdate&&i.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);C||r||x()}}function V(e){i.beforeUnmount&&i.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?V(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,_(t),O.push(e),T(t)),e.__ref&&e.__ref(null)}function R(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function I(e,t,n){return w(n,e,{},!1,t,!1)}c(R.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=c(c({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),h(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),U(this,2)},render:function(){}});n.d(t,"version",function(){return D}),n.d(t,"DOM",function(){return le}),n.d(t,"Children",function(){return ie}),n.d(t,"render",function(){return Z}),n.d(t,"createClass",function(){return _e}),n.d(t,"createPortal",function(){return ne}),n.d(t,"createFactory",function(){return se}),n.d(t,"createElement",function(){return pe}),n.d(t,"cloneElement",function(){return fe}),n.d(t,"isValidElement",function(){return me}),n.d(t,"findDOMNode",function(){return ye}),n.d(t,"unmountComponentAtNode",function(){return re}),n.d(t,"Component",function(){return xe}),n.d(t,"PureComponent",function(){return we}),n.d(t,"unstable_renderSubtreeIntoContainer",function(){return ee}),n.d(t,"unstable_batchedUpdates",function(){return Ae}),n.d(t,"__spread",function(){return be}),n.d(t,"PropTypes",function(){return a.a});var D="15.1.0",z="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),W="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,K="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("__preactCompatWrapper"):"__preactCompatWrapper",B={constructor:1,render:1,shouldComponentUpdate:1,componentWillReceiveProps:1,componentWillUpdate:1,componentDidUpdate:1,componentWillMount:1,componentDidMount:1,componentWillUnmount:1,componentDidUnmount:1},q=/^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/,J={},H=!1;try{H=!1}catch(e){}function G(){return null}var $=u("a",null).constructor;$.prototype.$$typeof=W,$.prototype.preactCompatUpgraded=!1,$.prototype.preactCompatNormalized=!1,Object.defineProperty($.prototype,"type",{get:function(){return this.nodeName},set:function(e){this.nodeName=e},configurable:!0}),Object.defineProperty($.prototype,"props",{get:function(){return this.attributes},set:function(e){this.attributes=e},configurable:!0});var X=i.event;i.event=function(e){return X&&(e=X(e)),e.persist=Object,e.nativeEvent=e,e};var Y=i.vnode;function Z(e,t,n){var r=t&&t._preactCompatRendered&&t._preactCompatRendered.base;r&&r.parentNode!==t&&(r=null),!r&&t&&(r=t.firstElementChild);for(var a=t.childNodes.length;a--;)t.childNodes[a]!==r&&t.removeChild(t.childNodes[a]);var o=I(e,t,r);return t&&(t._preactCompatRendered=o&&(o._component||{base:o})),"function"==typeof n&&n(),o&&o._component||o}i.vnode=function(e){if(!e.preactCompatUpgraded){e.preactCompatUpgraded=!0;var t=e.nodeName,n=e.attributes=null==e.attributes?{}:be({},e.attributes);"function"==typeof t?(!0===t[K]||t.prototype&&"isReactComponent"in t.prototype)&&(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(n.children=e.children),e.preactCompatNormalized||de(e),function(e){var t=e.nodeName,n=e.attributes;e.attributes={},t.defaultProps&&be(e.attributes,t.defaultProps);n&&be(e.attributes,n)}(e)):(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(n.children=e.children),n.defaultValue&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),function(e,t){var n,r,a;if(t){for(a in t)if(n=q.test(a))break;if(n)for(a in r=e.attributes={},t)t.hasOwnProperty(a)&&(r[q.test(a)?a.replace(/([A-Z0-9])/,"-$1").toLowerCase():a]=t[a])}}(e,n))}Y&&Y(e)};var Q=function(){};function ee(e,t,n,r){var a=Z(u(Q,{context:e.context},t),n),o=a._component||a.base;return r&&r.call(o,a),o}function te(e){ee(this,e.vnode,e.container)}function ne(e,t){return u(te,{vnode:e,container:t})}function re(e){var t=e._preactCompatRendered&&e._preactCompatRendered.base;return!(!t||t.parentNode!==e)&&(I(u(G),e,t),!0)}Q.prototype.getChildContext=function(){return this.props.context},Q.prototype.render=function(e){return e.children[0]};var ae,oe=[],ie={map:function(e,t,n){return null==e?null:(e=ie.toArray(e),n&&n!==e&&(t=t.bind(n)),e.map(t))},forEach:function(e,t,n){if(null==e)return null;e=ie.toArray(e),n&&n!==e&&(t=t.bind(n)),e.forEach(t)},count:function(e){return e&&e.length||0},only:function(e){if(1!==(e=ie.toArray(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:function(e){return null==e?[]:oe.concat(e)}};function se(e){return pe.bind(null,e)}for(var le={},ue=z.length;ue--;)le[z[ue]]=se(z[ue]);function ce(e){var t=e[K];return t?!0===t?e:t:(t=function(e){return _e({displayName:e.displayName||e.name,render:function(){return e(this.props,this.context)}})}(e),Object.defineProperty(t,K,{configurable:!0,value:!0}),t.displayName=e.displayName,t.propTypes=e.propTypes,t.defaultProps=e.defaultProps,Object.defineProperty(e,K,{configurable:!0,value:t}),t)}function pe(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function e(t,n){for(var r=n||0;r<t.length;r++){var a=t[r];Array.isArray(a)?e(a):a&&"object"==typeof a&&!me(a)&&(a.props&&a.type||a.attributes&&a.nodeName||a.children)&&(t[r]=pe(a.type||a.nodeName,a.props||a.attributes,a.children))}}(e,2),de(u.apply(void 0,e))}function de(e){e.preactCompatNormalized=!0,function(e){var t=e.attributes||(e.attributes={});he.enumerable="className"in t,t.className&&(t.class=t.className);Object.defineProperty(t,"className",he)}(e),function(e){return"function"==typeof e&&!(e.prototype&&e.prototype.render)}(e.nodeName)&&(e.nodeName=ce(e.nodeName));var t=e.attributes.ref,n=t&&typeof t;return!ae||"string"!==n&&"number"!==n||(e.attributes.ref=function(e,t){return t._refProxies[e]||(t._refProxies[e]=function(n){t&&t.refs&&(t.refs[e]=n,null===n&&(delete t._refProxies[e],t=null))})}(t,ae)),function(e){var t=e.nodeName,n=e.attributes;if(!n||"string"!=typeof t)return;var r={};for(var a in n)r[a.toLowerCase()]=a;r.ondoubleclick&&(n.ondblclick=n[r.ondoubleclick],delete n[r.ondoubleclick]);if(r.onchange&&("textarea"===t||"input"===t.toLowerCase()&&!/^fil|che|rad/i.test(n.type))){var o=r.oninput||"oninput";n[o]||(n[o]=Pe([n[o],n[r.onchange]]),delete n[r.onchange])}}(e),e}function fe(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];if(!me(e))return e;var a=e.attributes||e.props,o=[u(e.nodeName||e.type,be({},a),e.children||a&&a.children),t];return n&&n.length?o.push(n):t&&t.children&&o.push(t.children),de(d.apply(void 0,o))}function me(e){return e&&(e instanceof $||e.$$typeof===W)}var he={configurable:!0,get:function(){return this.class},set:function(e){this.class=e}};function be(e,t){for(var n=arguments,r=1,a=void 0;r<arguments.length;r++)if(a=n[r])for(var o in a)a.hasOwnProperty(o)&&(e[o]=a[o]);return e}function ve(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function ye(e){return e&&(e.base||1===e.nodeType&&e)||null}function ge(){}function _e(e){function t(e,t){!function(e){for(var t in e){var n=e[t];"function"!=typeof n||n.__bound||B.hasOwnProperty(t)||((e[t]=n.bind(e)).__bound=!0)}}(this),xe.call(this,e,t,J),Ee.call(this,e,t)}return(e=be({constructor:t},e)).mixins&&function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=Pe(t[n].concat(e[n]||oe),"getDefaultProps"===n||"getInitialState"===n||"getChildContext"===n))}(e,function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];for(var a in r)r.hasOwnProperty(a)&&"function"==typeof r[a]&&(t[a]||(t[a]=[])).push(r[a])}return t}(e.mixins)),e.statics&&be(t,e.statics),e.propTypes&&(t.propTypes=e.propTypes),e.defaultProps&&(t.defaultProps=e.defaultProps),e.getDefaultProps&&(t.defaultProps=e.getDefaultProps.call(t)),ge.prototype=xe.prototype,t.prototype=be(new ge,e),t.displayName=e.displayName||"Component",t}function ke(e,t,n){if("string"==typeof t&&(t=e.constructor.prototype[t]),"function"==typeof t)return t.apply(e,n)}function Pe(e,t){return function(){for(var n,r=arguments,a=0;a<e.length;a++){var o=ke(this,e[a],r);if(t&&null!=o)for(var i in n||(n={}),o)o.hasOwnProperty(i)&&(n[i]=o[i]);else void 0!==o&&(n=o)}return n}}function Ee(e,t){Ce.call(this,e,t),this.componentWillReceiveProps=Pe([Ce,this.componentWillReceiveProps||"componentWillReceiveProps"]),this.render=Pe([Ce,Se,this.render||"render",Ne])}function Ce(e,t){if(e){var n=e.children;if(n&&Array.isArray(n)&&1===n.length&&("string"==typeof n[0]||"function"==typeof n[0]||n[0]instanceof $)&&(e.children=n[0],e.children&&"object"==typeof e.children&&(e.children.length=1,e.children[0]=e.children)),H){var r="function"==typeof this?this:this.constructor,o=this.propTypes||r.propTypes,i=this.displayName||r.name;o&&a.a.checkPropTypes(o,e,"prop",i)}}}function Se(e){ae=this}function Ne(){ae===this&&(ae=null)}function xe(e,t,n){R.call(this,e,t),this.state=this.getInitialState?this.getInitialState():{},this.refs={},this._refProxies={},n!==J&&Ee.call(this,e,t)}function we(e,t){xe.call(this,e,t)}function Ae(e){e()}be(xe.prototype=new R,{constructor:xe,isReactComponent:{},replaceState:function(e,t){for(var n in this.setState(e,t),this.state)n in e||delete this.state[n]},getDOMNode:function(){return this.base},isMounted:function(){return!!this.base}}),ge.prototype=xe.prototype,we.prototype=new ge,we.prototype.isPureReactComponent=!0,we.prototype.shouldComponentUpdate=function(e,t){return ve(this.props,e)||ve(this.state,t)};var Fe={version:D,DOM:le,PropTypes:a.a,Children:ie,render:Z,createClass:_e,createPortal:ne,createFactory:se,createElement:pe,cloneElement:fe,isValidElement:me,findDOMNode:ye,unmountComponentAtNode:re,Component:xe,PureComponent:we,unstable_renderSubtreeIntoContainer:ee,unstable_batchedUpdates:Ae,__spread:be};t.default=Fe},function(e,t,n){e.exports=n(8)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=0;function a(e){return l(u(s(e),8*e.length))}function o(e){for(var t,n=r?"0123456789ABCDEF":"0123456789abcdef",a="",o=0;o<e.length;o++)t=e.charCodeAt(o),a+=n.charAt(t>>>4&15)+n.charAt(15&t);return a}function i(e){for(var t,n,r="",a=-1;++a<e.length;)t=e.charCodeAt(a),n=a+1<e.length?e.charCodeAt(a+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),a++),t<=127?r+=String.fromCharCode(t):t<=2047?r+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}function s(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function l(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(String.fromCharCode(e[n>>5]>>>n%32&255));return t.join("")}function u(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,a=-1732584194,o=271733878,i=0;i<e.length;i+=16){var s=n,l=r,u=a,c=o;n=p(n,r,a,o,e[i],7,-680876936),o=p(o,n,r,a,e[i+1],12,-389564586),a=p(a,o,n,r,e[i+2],17,606105819),r=p(r,a,o,n,e[i+3],22,-1044525330),n=p(n,r,a,o,e[i+4],7,-176418897),o=p(o,n,r,a,e[i+5],12,1200080426),a=p(a,o,n,r,e[i+6],17,-1473231341),r=p(r,a,o,n,e[i+7],22,-45705983),n=p(n,r,a,o,e[i+8],7,1770035416),o=p(o,n,r,a,e[i+9],12,-1958414417),a=p(a,o,n,r,e[i+10],17,-42063),r=p(r,a,o,n,e[i+11],22,-1990404162),n=p(n,r,a,o,e[i+12],7,1804603682),o=p(o,n,r,a,e[i+13],12,-40341101),a=p(a,o,n,r,e[i+14],17,-1502002290),r=p(r,a,o,n,e[i+15],22,1236535329),n=d(n,r,a,o,e[i+1],5,-165796510),o=d(o,n,r,a,e[i+6],9,-1069501632),a=d(a,o,n,r,e[i+11],14,643717713),r=d(r,a,o,n,e[i],20,-373897302),n=d(n,r,a,o,e[i+5],5,-701558691),o=d(o,n,r,a,e[i+10],9,38016083),a=d(a,o,n,r,e[i+15],14,-660478335),r=d(r,a,o,n,e[i+4],20,-405537848),n=d(n,r,a,o,e[i+9],5,568446438),o=d(o,n,r,a,e[i+14],9,-1019803690),a=d(a,o,n,r,e[i+3],14,-187363961),r=d(r,a,o,n,e[i+8],20,1163531501),n=d(n,r,a,o,e[i+13],5,-1444681467),o=d(o,n,r,a,e[i+2],9,-51403784),a=d(a,o,n,r,e[i+7],14,1735328473),r=d(r,a,o,n,e[i+12],20,-1926607734),n=f(n,r,a,o,e[i+5],4,-378558),o=f(o,n,r,a,e[i+8],11,-2022574463),a=f(a,o,n,r,e[i+11],16,1839030562),r=f(r,a,o,n,e[i+14],23,-35309556),n=f(n,r,a,o,e[i+1],4,-1530992060),o=f(o,n,r,a,e[i+4],11,1272893353),a=f(a,o,n,r,e[i+7],16,-155497632),r=f(r,a,o,n,e[i+10],23,-1094730640),n=f(n,r,a,o,e[i+13],4,681279174),o=f(o,n,r,a,e[i],11,-358537222),a=f(a,o,n,r,e[i+3],16,-722521979),r=f(r,a,o,n,e[i+6],23,76029189),n=f(n,r,a,o,e[i+9],4,-640364487),o=f(o,n,r,a,e[i+12],11,-421815835),a=f(a,o,n,r,e[i+15],16,530742520),r=f(r,a,o,n,e[i+2],23,-995338651),n=m(n,r,a,o,e[i],6,-198630844),o=m(o,n,r,a,e[i+7],10,1126891415),a=m(a,o,n,r,e[i+14],15,-1416354905),r=m(r,a,o,n,e[i+5],21,-57434055),n=m(n,r,a,o,e[i+12],6,1700485571),o=m(o,n,r,a,e[i+3],10,-1894986606),a=m(a,o,n,r,e[i+10],15,-1051523),r=m(r,a,o,n,e[i+1],21,-2054922799),n=m(n,r,a,o,e[i+8],6,1873313359),o=m(o,n,r,a,e[i+15],10,-30611744),a=m(a,o,n,r,e[i+6],15,-1560198380),r=m(r,a,o,n,e[i+13],21,1309151649),n=m(n,r,a,o,e[i+4],6,-145523070),o=m(o,n,r,a,e[i+11],10,-1120210379),a=m(a,o,n,r,e[i+2],15,718787259),r=m(r,a,o,n,e[i+9],21,-343485551),n=h(n,s),r=h(r,l),a=h(a,u),o=h(o,c)}return Array(n,r,a,o)}t.md5hash=function(e){return o(a(i(e)))};var c=function(e,t,n,r,a,o){return h(b(h(h(t,e),h(r,o)),a),n)},p=function(e,t,n,r,a,o,i){return c(t&n|~t&r,e,t,a,o,i)},d=function(e,t,n,r,a,o,i){return c(t&r|n&~r,e,t,a,o,i)},f=function(e,t,n,r,a,o,i){return c(t^n^r,e,t,a,o,i)},m=function(e,t,n,r,a,o,i){return c(n^(t|~r),e,t,a,o,i)},h=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},b=function(e,t){return e<<t|e>>>32-t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.libreApi="https://libre.fm/api/",t.libre2_0="https://libre.fm/2.0/",t.connectApplicationLibreFm=function(e){return r.connectApplication(t.libreApi,e)};t.convertToLibreScrobbles=function(e){return e.map(function(e){return function(e,t,n,r,a,o,i){return{timestamp:e,track:t,artist:n,album:r,mbid:a,duration:o,trackNumber:i}}(e.uts,e.name,e.artist&&e.artist.name||"",e.album&&e.album.name,e.mbid,e.duration,e.trackNumber)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/([^&=]+)=?([^&]*)/g,a=function(e){return decodeURIComponent(e.replace(/\s+/g,""))};t.parseUrlParams=function(e){if(e){for(var t={},n=e.substring(1),o=void 0;o=r.exec(n);)t[a(o[1])]=a(o[2]);return t}return{}},t.getCurrentHostName=function(e){if(!e)return"";var t=e.location;return t&&t.hostname||""}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(2),i=n(10),s=n(6),l=document.getElementById("mount-point"),u=window?window.location:null,c=s.parseUrlParams(u?u.search:null);l&&(console.log("Emptying mount-point"),l.innerHTML="",o.render(a.createElement(i.App,r({},c)),l))},function(e,t,n){"use strict";var r=n(9);function a(){}e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=a,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(11),s=n(12),l=n(13),u=n(14),c=n(1),p=n(5),d=n(0),f=n(15),m="r9i1y91hz71tcx7vyrp9hk1alhqp1888",h="21dsgf56dfg13df5g46sd85769gt45fd",b=200,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showTokenInstruction:!1,showSessionInstruction:!1,libreUsername:"",librePassword:"",libreApiKey:t.props.api_key_libre||m,libreToken:t.props.token||"",libreSecret:t.props.secret||h,libreSessionKey:t.props.sk||"",api_key:t.props.api_key||"e38cc7822bd7476fe4083e36ee69748e",api_method:u.apiMethodDefault,userLastFm:"",scrobbles:[],startpage:1,totalPages:-1,resultsPerPageLastFm:b,retrying:-1,url:null,errorMessage:null,xhr:null,showJson:!1},t}return r(t,e),t.prototype.fetchUrl=function(e,t,n){var r=this;void 0===n&&(n=-1),n>0?setTimeout(function(){r.state.url===e&&r.actuallyFetch(e,t,n)},1e3*n):this.actuallyFetch(e,t)},t.prototype.onErrorFetch=function(e,t,n,r,a){void 0===a&&(a=-1);var o=n?a>0?2*a:5:-1;this.setState({retrying:o,errorMessage:r}),n&&this.fetchUrl(t,e,o)},t.prototype.actuallyFetch=function(e,t,n){var r=this;void 0===n&&(n=-1),this.setState({retrying:-1,url:e});var a=function(a,o){return r.onErrorFetch(t,e,a,o,n)},o=this;c.makeGetRequest(e,function(){var n=JSON.parse(this.responseText);if(e===o.state.url)if(n.hasOwnProperty("error"))a("User not found"!==n.message,n.message);else{var r=n.recenttracks;if(r){var i=r.track;i&&i.length?t(r["@attr"].totalPages,i.map(l.parseRawScrobble),null):a(!1,"No tracks found")}else a(!1,"No tracks found")}},function(){e===o.state.url&&a(!0)})},t.prototype.startExportJson=function(e){var t=this.state.xhr;t&&t.abort(),this.setState({errorMessage:null,url:null,xhr:null,scrobbles:[]}),this.startExportJsonPage(this.state.startpage,e)},t.prototype.createScrobbleForm=function(e,t){var n=document.createElement("form");n.target=e,n.method="post",n.action=p.libre2_0;var r=document.createElement("input");r.type="submit",r.value="Retry scrobbling "+t.length+" tracks to Libre.fm",n.appendChild(r),d.createScrobbleFormData(p.convertToLibreScrobbles(t),this.state.libreApiKey,this.state.libreSessionKey,this.state.libreSecret).forEach(function(e,t){var r=document.createElement("input");r.type="hidden",r.value=e.toString(),r.name=t,n.appendChild(r)});var a=document.createElement("input");return a.type="hidden",a.value="json",a.name="format",n.appendChild(a),{form:n,submit:r}},t.prototype.pushToLibreFm=function(e,t,n){var r=this,a=document.getElementById("synchronize-scrobbles");if(a){var o=f.splitArray(t,50),i=document.createElement("div");a.appendChild(i),o.forEach(function(t,n){var a=document.createElement("div");a.style.width=100/o.length+"%",a.style.display="inline-block";var s=document.createElement("iframe");s.style.width="100%",s.style.display="block",s.style.height="96px";var l=e+"-"+(n+1);s.name=l;var u=r.createScrobbleForm(l,t),c=u.form,p=u.submit;c.style.width="100%",p.style.width="100%",a.appendChild(s),a.appendChild(c),i.appendChild(a),p.click()}),setTimeout(n,2e3)}else alert("No element found with id 'synchronize-scrobbles'")},t.prototype.startExportJsonPage=function(e,t){var n=this,r=u.createUrl(this.state.api_method,this.state.userLastFm,this.state.api_key,e,this.state.resultsPerPageLastFm),a=this.state.xhr;a&&a.abort(),this.setState({startpage:e,url:r,xhr:null}),this.fetchUrl(r,function(a,o,i){if(o&&r===n.state.url){var s=isFinite(n.state.totalPages)&&n.state.totalPages>0?n.state.totalPages:a;t?(n.setState({totalPages:s,url:void 0,retrying:-400,scrobbles:o}),n.pushToLibreFm(e,o,function(){e<s&&n.startExportJsonPage(e+1,t)})):(n.setState({totalPages:s,url:void 0,retrying:-200,scrobbles:n.state.scrobbles.concat(o)}),e<s&&n.startExportJsonPage(e+1,t))}})},t.prototype.render=function(){var e=this;return o.createElement("div",{id:"app-root"},o.createElement("section",null,o.createElement("h2",null,"Last.fm parameters"),o.createElement("div",{className:"api-parameters"},o.createElement(i.ApiParameter,{currentValue:this.state.userLastFm,defaultValue:"",title:"Username",htmlFor:"username-lastfm",onChange:function(t){e.setState({userLastFm:t.target.value})}},o.createElement("a",{className:(this.state.userLastFm?"visible":"hidden")+" api-parameter-cell xsmall",href:"https://www.last.fm/user/"+this.state.userLastFm},"Profile")),o.createElement(i.ApiParameter,{currentValue:this.state.api_key,defaultValue:this.props.api_key||"",title:"API key",htmlFor:"api-key-lastfm",onChange:function(t){e.setState({api_key:t.target.value})}},o.createElement("a",{className:"api-parameter-cell xsmall",href:"https://www.last.fm/api/account/create"},"Request API key")),o.createElement(i.ApiParameter,{currentValue:this.state.api_method,defaultValue:u.apiMethodDefault,title:"API method",htmlFor:"api-method-lastfm",onChange:function(t){e.setState({api_method:t.target.value})}}),o.createElement(i.ApiParameter,{currentValue:this.state.startpage,defaultValue:"1",title:"startpage",htmlFor:"api-startpage-lastfm",onChange:function(t){var n=parseInt(t.target.value),r=isFinite(n)?n:1/0;e.setState({startpage:r})}}),o.createElement(i.ApiParameter,{htmlFor:"api-lastpage-lastfm",title:"lastpage",defaultValue:"",currentValue:this.state.totalPages,onChange:function(t){var n=parseInt(t.target.value);e.setState({totalPages:isFinite(n)?n:1/0})}}),o.createElement(i.ApiParameter,{htmlFor:"api-results-per-page-lastfm",title:"Results per page (max 200)",defaultValue:b.toString(),currentValue:this.state.resultsPerPageLastFm,onChange:function(t){var n=parseInt(t.target.value),r=isFinite(n)?n:1/0,a=Math.min(r,b);e.setState({resultsPerPageLastFm:isFinite(a)&&a<=b?a:b})}})),o.createElement("div",{className:"all-set "+(this.state.userLastFm&&this.state.api_key?"visible":"hidden")},"✓ All Last.fm settings set")),o.createElement("section",null,o.createElement("h2",null,"Libre.fm settings"),o.createElement("div",{className:"api-parameters"},o.createElement(i.ApiParameter,{htmlFor:"api-key-libre",title:"API key",defaultValue:this.props.api_key_libre||m,currentValue:this.state.libreApiKey,onChange:function(t){var n=t.target.value;e.setState({libreApiKey:n})}}),o.createElement(i.ApiParameter,{htmlFor:"api-secret-libre",title:"Secret",defaultValue:this.props.secret||h,currentValue:this.state.libreSecret,onChange:function(t){e.setState({libreSecret:t.target.value})}}),o.createElement(i.ApiParameter,{htmlFor:"api-token-libre",title:"Token",defaultValue:this.props.token,currentValue:this.state.libreToken,onChange:function(t){e.setState({libreToken:t.target.value})}},o.createElement("form",{action:p.libre2_0,className:"api-parameter-cell",target:"myFrame",method:"post"},o.createElement("input",{type:"hidden",name:"method",value:"auth.getToken"}),o.createElement("input",{type:"hidden",name:"api_key",value:this.state.libreApiKey}),o.createElement("input",{type:"hidden",name:"format",value:"json"}),o.createElement("input",{type:"hidden",name:"api_sig",value:d.constructSignatureForParams([["api_key",this.state.libreApiKey],["method","auth.getToken"]],this.state.libreSecret)}),o.createElement("input",{value:"Create token",type:"submit",onClick:function(){e.setState({showTokenInstruction:!0})}}))),o.createElement("div",{className:"api-parameter"},o.createElement("span",{className:"instruction "+(this.state.showTokenInstruction?"visible":"hidden")},"Copy the token into the above field. So if the response is ",o.createElement("code",null,"{",'"token": "xyz"}'),", copy ",o.createElement("em",null,"xyz")," without the quotes.")),o.createElement("div",{className:"api-parameter"},o.createElement("iframe",{name:"myFrame",id:"myFrame",className:"frame-output api-parameter-cell "+(this.state.showTokenInstruction?"visible":"hidden")})),o.createElement("div",{className:"api-parameter"},o.createElement("form",{action:p.libreApi+"auth/",className:this.state.libreToken?"visible":"hidden",target:"_blank",method:"post"},o.createElement("input",{type:"hidden",name:"api_key",value:this.state.libreApiKey}),o.createElement("input",{type:"hidden",name:"token",value:this.state.libreToken}),o.createElement("input",{value:"Authorize this token to change your account",className:"btn-authorize-token btn-big",type:"submit"}))),o.createElement(i.ApiParameter,{htmlFor:"api-username-libre",title:"Username",defaultValue:"",currentValue:this.state.libreUsername,onChange:function(t){var n=t.target.value;e.setState({libreUsername:n})}},o.createElement("a",{className:(this.state.libreUsername?"visible":"hidden")+" api-parameter-cell xsmall",href:"https://libre.fm/user/"+this.state.libreUsername},"Profile")),o.createElement(i.ApiParameter,{htmlFor:"api-sk-libre",title:"Session key",defaultValue:this.props.sk||"",currentValue:this.state.libreSessionKey,onChange:function(t){e.setState({libreSessionKey:t.target.value})}},o.createElement("form",{action:p.libre2_0,className:"api-parameter-cell "+(this.state.libreToken?"visible":"hidden"),target:"get-session-output",method:"post"},o.createElement("input",{type:"hidden",name:"method",value:"auth.getSession"}),o.createElement("input",{type:"hidden",name:"api_key",value:this.state.libreApiKey}),o.createElement("input",{type:"hidden",name:"token",value:this.state.libreToken}),o.createElement("input",{type:"hidden",name:"format",value:"json"}),o.createElement("input",{type:"hidden",name:"api_sig",value:d.constructSignatureForParams([["api_key",this.state.libreApiKey],["method","auth.getSession"],["token",this.state.libreToken]],this.state.libreSecret)}),o.createElement("input",{value:"Create session key",className:"btn-create-session",type:"submit",onClick:function(){e.setState({showSessionInstruction:!0})}})),o.createElement("div",{className:"api-parameter"},o.createElement("span",{className:"instruction "+(this.state.showSessionInstruction?"visible":"hidden")},"Copy the username and session key into the above field. So if the response is ","{",'"key": "xyz"}, copy ',o.createElement("em",null,"xyz")," without the quotes.")),o.createElement("iframe",{name:"get-session-output",className:"frame-output "+(this.state.showSessionInstruction?"visible":"hidden")})),o.createElement("div",{className:"all-set "+(this.state.libreApiKey&&this.state.libreUsername&&this.state.libreSecret&&this.state.libreSessionKey?"visible":"hidden")},"✓ All Libre.fm settings set"))),o.createElement(s.StatusLine,a({},this.state,{scrobbleNum:this.state.scrobbles.length})),o.createElement("section",{id:"synchronize-scrobbles",className:"subtitled"},o.createElement("h2",null,"Synchronize Last.fm scrobbles to Libre.fm"),o.createElement("div",{className:"xsmall subtitle"},o.createElement("p",null,"Scroll down the status windows to see if the scrobbles were succesful. Look for something like: ",o.createElement("code",null,'"@attr":',"{",'"accepted":"x","ignored":"y"}}}')),o.createElement("p",null,"You do not need to worry about tracks being scrobbled more than once. Duplicates are ignored automatically.")),o.createElement("div",{className:"api-parameters"},o.createElement(i.ApiParameter,{currentValue:this.state.startpage,defaultValue:"1",title:"Start on Last.fm 'Recently Listened' page",htmlFor:"api-startpage-lastfm",onChange:function(t){var n=parseInt(t.target.value),r=isFinite(n)?n:1/0;e.setState({startpage:r})}}),o.createElement(i.ApiParameter,{htmlFor:"api-lastpage-lastfm",title:"End on page (optional)",defaultValue:"",currentValue:this.state.totalPages,onChange:function(t){var n=parseInt(t.target.value);e.setState({totalPages:isFinite(n)?n:1/0})}})),o.createElement("button",{onClick:function(){var t=e.state,n=t.userLastFm,r=t.api_key,a=t.libreApiKey,o=t.libreUsername,i=t.libreSecret,s=t.libreSessionKey;n?r&&a&&o&&i&&s?e.startExportJson(!0):alert("Fill in usernames / API keys / session keys first"):alert("Fill in Last.fm usernames first")}},"Synchronize Last.fm scrobbles to Libre.fm")),o.createElement("section",null,o.createElement("h2",null,"Last.fm export only"),o.createElement("button",{className:"btn-export btn-big",onClick:function(){return e.startExportJson(!1)}},"Export Last.fm scrobbles"),o.createElement("div",null,o.createElement("input",{type:"checkbox",name:"show-output",defaultChecked:this.state.showJson,onChange:function(t){e.setState({showJson:t.target.checked})}}),o.createElement("label",{htmlFor:"show-output"},"Show output"),this.state.showJson?o.createElement("textarea",{className:"output-json",value:JSON.stringify(this.state.scrobbles)}):"")))},t}(o.PureComponent);t.App=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.ApiParameter=function(e){var t=e.children,n=e.defaultValue,a=e.currentValue,o=e.type,i=e.title,s=e.htmlFor,l=e.onChange;return r.createElement("div",{className:"api-parameter"},r.createElement("label",{className:"api-parameter-cell api-parameter-label "+function(e){return e?"label-input-set":"label-input-empty"}(a),htmlFor:s},i),r.createElement("input",{className:"mdc-text-field api-parameter-cell api-parameter-input",defaultValue:n,type:o||"text",name:s,id:s,onChange:l}),t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=function(e){var t=e.errorMessage,n=e.retrying;return t?n?r.createElement("div",{className:"status-line"},t,r.createElement("br",null),"Retrying in ",n," seconds"):r.createElement("div",{className:"status-line"},t):r.createElement("div",{className:"status-line"},"Retrying in ",n," seconds")};t.StatusLine=function(e){var t=e.errorMessage,n=e.url,o=e.retrying,i=e.startpage,s=e.totalPages,l=e.scrobbleNum,u=[],c=!t||o>=0;return-200===o?u.push(r.createElement("div",{key:"done",className:"status-line-page"},"Done! Received ",l," tracks.")):c&&(i>1||s>0)&&u.push(r.createElement("div",{key:"progress",className:"status-line-page"},i," / ",s," (",l," scrobbles so far)")),c&&n&&u.push(r.createElement("div",{key:"url",className:"status-line-url"},r.createElement("a",{href:n},n))),u.push(o>0?r.createElement(a,{key:"retrying",errorMessage:t,retrying:o}):t?r.createElement(a,{key:"retrying",errorMessage:t}):n?r.createElement("div",{key:"retrying",className:"status-line"},"Fetching ..."):r.createElement("div",{key:"retrying",className:"status-line"})),r.createElement("div",{className:"status"},u)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/[\0-\x08\x0b-\x1f]|\xef\xbf\xbe/g;t.sanitizeString=function(e){return e&&e.replace(r,"")},t.parseRawScrobble=function(e){return{artist:t.parseArtist(e.artist),name:t.sanitizeString(e.name||void 0),mbid:t.sanitizeString(e.mbid||void 0),duration:t.sanitizeString(e.duration||void 0),trackNumber:t.sanitizeString(e.trackNumber||void 0),album:o(e.album),uts:e.date&&e.date.uts||void 0}};var a=function(e){return e?{name:t.sanitizeString(e["#text"]||void 0),mbid:t.sanitizeString(e.mbid||void 0)}:void 0};t.parseArtist=function(e){return a(e)};var o=function(e){return a(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a="https://ws.audioscrobbler.com/2.0/";t.apiMethodDefault="user.getrecenttracks",t.createUrl=function(e,t,n,r,a){return void 0===a&&(a=2),"https://ws.audioscrobbler.com/2.0/?method="+e+"&user="+t+"&api_key="+n+"&limit="+a+"&page="+r+"&format=json"},t.createSessionUrlLastFm=function(e,t,n){return r.createSessionUrl(a,e,t,n)},t.connectApplicationLastFm=function(e){return r.connectApplication("https://www.last.fm/api/",e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitArray=function(e,t){var n=[],r=[];return n.push(r),e.forEach(function(e){r.length>=t&&(r=[],n.push(r)),r.push(e)}),n}}])});
//# sourceMappingURL=app.js.map