!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),a=r(1);t.urlGetToken=function(e,r,n){var a=[["method","auth.getToken"],["api_key",r]];return e+"?"+o(a)+"&api_sig="+t.constructSignatureForParams(a,n)+"&format=json"},t.connectApplication=function(e,t,r){return e+"auth/?api_key="+(r?t+"&cb="+encodeURIComponent(r):t)};var o=function(e){return e.map(function(e){return e[0]+"="+e[1]}).join("&")};t.createSessionUrl=function(e,r,n,a){var i=[["api_key",r],["method","auth.getSession"],["token",n]];return e+"?"+o(i)+"&api_sig="+t.constructSignatureForParams(i,a)+"&format=json"};var i=function(e,t,r){r&&e.push([t,r])},s=function(e,t,r){i(e,"artist["+r+"]",t.artist),i(e,"track["+r+"]",t.track),i(e,"timestamp["+r+"]",t.timestamp.toString()),i(e,"album["+r+"]",t.album),i(e,"trackNumber["+r+"]",t.trackNumber),i(e,"mbid["+r+"]",t.mbid),i(e,"duration["+r+"]",t.duration)};function l(e,r,n,a){var o=[];e.forEach(function(e,t){return s(o,e,t)});o.push(["method","track.scrobble"]),o.push(["api_key",r]),o.push(["sk",n]);var i=new FormData;return o.forEach(function(e){return i.append(e[0],e[1])}),i.append("api_sig",t.constructSignatureForParams(o,a)),i}t.createScrobbleFormData=l,t.scrobbleTracks=function(e,t,r,n,o){var i=l(o,t,r,n),s=a.makePostRequest(e,i,function(){alert(s.responseText)},function(){alert(s.responseText)})};t.constructSignatureForParams=function(e,t){return n.md5hash(""+function(e){return e.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0})}(e).map(function(e){return e[0]+e[1]})+t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRequest=function(e,t,r){var n=new XMLHttpRequest;return n.overrideMimeType("application/json"),n.open("GET",e,!0),r&&(n.onerror=r),t&&(n.onload=t),n},t.makeGetRequest=function(e,t,r){var n=new XMLHttpRequest;return n.overrideMimeType("application/json"),n.open("GET",e,!0),r&&(n.onerror=r),t&&(n.onload=t),n.send(null),n},t.makePostRequest=function(e,t,r,n){var a=new XMLHttpRequest;return a.overrideMimeType("application/json"),a.open("POST",e,!0),n&&(a.onerror=n),r&&(a.onload=r),a.send(t),a}},function(e,t,r){"use strict";r.r(t);var n=r(3),a=r.n(n),o=function(){},i={},s=[],l=[];function u(e,t){var r,n,a,u,c=l;for(u=arguments.length;u-- >2;)s.push(arguments[u]);for(t&&null!=t.children&&(s.length||s.push(t.children),delete t.children);s.length;)if((n=s.pop())&&void 0!==n.pop)for(u=n.length;u--;)s.push(n[u]);else"boolean"==typeof n&&(n=null),(a="function"!=typeof e)&&(null==n?n="":"number"==typeof n?n=String(n):"string"!=typeof n&&(a=!1)),a&&r?c[c.length-1]+=n:c===l?c=[n]:c.push(n),r=a;var p=new o;return p.nodeName=e,p.children=c,p.attributes=null==t?void 0:t,p.key=null==t?void 0:t.key,void 0!==i.vnode&&i.vnode(p),p}function c(e,t){for(var r in t)e[r]=t[r];return e}var p="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function d(e,t){return u(e.nodeName,c(c({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,m=[];function h(e){!e._dirty&&(e._dirty=!0)&&1==m.push(e)&&(i.debounceRendering||p)(b)}function b(){var e,t=m;for(m=[];e=t.pop();)e._dirty&&U(e)}function v(e,t,r){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&y(e,t.nodeName):r||e._componentConstructor===t.nodeName}function y(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function g(e){var t=c({},e.attributes);t.children=e.children;var r=e.nodeName.defaultProps;if(void 0!==r)for(var n in r)void 0===t[n]&&(t[n]=r[n]);return t}function _(e){var t=e.parentNode;t&&t.removeChild(e)}function k(e,t,r,n,a){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)r&&r(null),n&&n(e);else if("class"!==t||a)if("style"===t){if(n&&"string"!=typeof n&&"string"!=typeof r||(e.style.cssText=n||""),n&&"object"==typeof n){if("string"!=typeof r)for(var o in r)o in n||(e.style[o]="");for(var o in n)e.style[o]="number"==typeof n[o]&&!1===f.test(o)?n[o]+"px":n[o]}}else if("dangerouslySetInnerHTML"===t)n&&(e.innerHTML=n.__html||"");else if("o"==t[0]&&"n"==t[1]){var i=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),n?r||e.addEventListener(t,P,i):e.removeEventListener(t,P,i),(e._listeners||(e._listeners={}))[t]=n}else if("list"!==t&&"type"!==t&&!a&&t in e){try{e[t]=null==n?"":n}catch(e){}null!=n&&!1!==n||"spellcheck"==t||e.removeAttribute(t)}else{var s=a&&t!==(t=t.replace(/^xlink:?/,""));null==n||!1===n?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof n&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):e.setAttribute(t,n))}else e.className=n||""}function P(e){return this._listeners[e.type](i.event&&i.event(e)||e)}var E=[],C=0,S=!1,N=!1;function x(){for(var e;e=E.pop();)i.afterMount&&i.afterMount(e),e.componentDidMount&&e.componentDidMount()}function w(e,t,r,n,a,o){C++||(S=null!=a&&void 0!==a.ownerSVGElement,N=null!=e&&!("__preactattr_"in e));var i=A(e,t,r,n,o);return a&&i.parentNode!==a&&a.appendChild(i),--C||(N=!1,o||x()),i}function A(e,t,r,n,a){var o=e,i=S;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||a)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),F(e,!0))),o.__preactattr_=!0,o;var s=t.nodeName;if("function"==typeof s)return function(e,t,r,n){var a=e&&e._component,o=a,i=e,s=a&&e._componentConstructor===t.nodeName,l=s,u=g(t);for(;a&&!l&&(a=a._parentComponent);)l=a.constructor===t.nodeName;a&&l&&(!n||a._component)?(M(a,u,3,r,n),e=a.base):(o&&!s&&(V(o),e=i=null),a=L(t.nodeName,u,r),e&&!a.nextBase&&(a.nextBase=e,i=null),M(a,u,1,r,n),e=a.base,i&&e!==i&&(i._component=null,F(i,!1)));return e}(e,t,r,n);if(S="svg"===s||"foreignObject"!==s&&S,s=String(s),(!e||!y(e,s))&&(o=function(e,t){var r=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return r.normalizedNodeName=e,r}(s,S),e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),F(e,!0)}var l=o.firstChild,u=o.__preactattr_,c=t.children;if(null==u){u=o.__preactattr_={};for(var p=o.attributes,d=p.length;d--;)u[p[d].name]=p[d].value}return!N&&c&&1===c.length&&"string"==typeof c[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=c[0]&&(l.nodeValue=c[0]):(c&&c.length||null!=l)&&function(e,t,r,n,a){var o,i,s,l,u,c=e.childNodes,p=[],d={},f=0,m=0,h=c.length,b=0,y=t?t.length:0;if(0!==h)for(var g=0;g<h;g++){var k=c[g],P=k.__preactattr_,E=y&&P?k._component?k._component.__key:P.key:null;null!=E?(f++,d[E]=k):(P||(void 0!==k.splitText?!a||k.nodeValue.trim():a))&&(p[b++]=k)}if(0!==y)for(var g=0;g<y;g++){l=t[g],u=null;var E=l.key;if(null!=E)f&&void 0!==d[E]&&(u=d[E],d[E]=void 0,f--);else if(m<b)for(o=m;o<b;o++)if(void 0!==p[o]&&v(i=p[o],l,a)){u=i,p[o]=void 0,o===b-1&&b--,o===m&&m++;break}u=A(u,l,r,n),s=c[g],u&&u!==e&&u!==s&&(null==s?e.appendChild(u):u===s.nextSibling?_(s):e.insertBefore(u,s))}if(f)for(var g in d)void 0!==d[g]&&F(d[g],!1);for(;m<=b;)void 0!==(u=p[b--])&&F(u,!1)}(o,c,r,n,N||null!=u.dangerouslySetInnerHTML),function(e,t,r){var n;for(n in r)t&&null!=t[n]||null==r[n]||k(e,n,r[n],r[n]=void 0,S);for(n in t)"children"===n||"innerHTML"===n||n in r&&t[n]===("value"===n||"checked"===n?e[n]:r[n])||k(e,n,r[n],r[n]=t[n],S)}(o,t.attributes,u),S=i,o}function F(e,t){var r=e._component;r?V(r):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||_(e),T(e))}function T(e){for(e=e.lastChild;e;){var t=e.previousSibling;F(e,!0),e=t}}var O=[];function L(e,t,r){var n,a=O.length;for(e.prototype&&e.prototype.render?(n=new e(t,r),R.call(n,t,r)):((n=new R(t,r)).constructor=e,n.render=j);a--;)if(O[a].constructor===e)return n.nextBase=O[a].nextBase,O.splice(a,1),n;return n}function j(e,t,r){return this.constructor(e,r)}function M(e,t,r,n,a){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,n)),n&&n!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=n),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==r&&(1!==r&&!1===i.syncComponentUpdates&&e.base?h(e):U(e,1,a)),e.__ref&&e.__ref(e))}function U(e,t,r,n){if(!e._disable){var a,o,s,l=e.props,u=e.state,p=e.context,d=e.prevProps||l,f=e.prevState||u,m=e.prevContext||p,h=e.base,b=e.nextBase,v=h||b,y=e._component,_=!1,k=m;if(e.constructor.getDerivedStateFromProps&&(u=c(c({},u),e.constructor.getDerivedStateFromProps(l,u)),e.state=u),h&&(e.props=d,e.state=f,e.context=m,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(l,u,p)?_=!0:e.componentWillUpdate&&e.componentWillUpdate(l,u,p),e.props=l,e.state=u,e.context=p),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!_){a=e.render(l,u,p),e.getChildContext&&(p=c(c({},p),e.getChildContext())),h&&e.getSnapshotBeforeUpdate&&(k=e.getSnapshotBeforeUpdate(d,f));var P,S,N=a&&a.nodeName;if("function"==typeof N){var A=g(a);(o=y)&&o.constructor===N&&A.key==o.__key?M(o,A,1,p,!1):(P=o,e._component=o=L(N,A,p),o.nextBase=o.nextBase||b,o._parentComponent=e,M(o,A,0,p,!1),U(o,1,r,!0)),S=o.base}else s=v,(P=y)&&(s=e._component=null),(v||1===t)&&(s&&(s._component=null),S=w(s,a,p,r||!h,v&&v.parentNode,!0));if(v&&S!==v&&o!==y){var T=v.parentNode;T&&S!==T&&(T.replaceChild(S,v),P||(v._component=null,F(v,!1)))}if(P&&V(P),e.base=S,S&&!n){for(var O=e,j=e;j=j._parentComponent;)(O=j).base=S;S._component=O,S._componentConstructor=O.constructor}}for(!h||r?E.unshift(e):_||(e.componentDidUpdate&&e.componentDidUpdate(d,f,k),i.afterUpdate&&i.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);C||n||x()}}function V(e){i.beforeUnmount&&i.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var r=e._component;r?V(r):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,_(t),O.push(e),T(t)),e.__ref&&e.__ref(null)}function R(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function I(e,t,r){return w(r,e,{},!1,t,!1)}c(R.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=c(c({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),h(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),U(this,2)},render:function(){}});r.d(t,"version",function(){return D}),r.d(t,"DOM",function(){return le}),r.d(t,"Children",function(){return ie}),r.d(t,"render",function(){return Z}),r.d(t,"createClass",function(){return _e}),r.d(t,"createPortal",function(){return re}),r.d(t,"createFactory",function(){return se}),r.d(t,"createElement",function(){return pe}),r.d(t,"cloneElement",function(){return fe}),r.d(t,"isValidElement",function(){return me}),r.d(t,"findDOMNode",function(){return ye}),r.d(t,"unmountComponentAtNode",function(){return ne}),r.d(t,"Component",function(){return xe}),r.d(t,"PureComponent",function(){return we}),r.d(t,"unstable_renderSubtreeIntoContainer",function(){return ee}),r.d(t,"unstable_batchedUpdates",function(){return Ae}),r.d(t,"__spread",function(){return be}),r.d(t,"PropTypes",function(){return a.a});var D="15.1.0",z="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),W="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,K="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("__preactCompatWrapper"):"__preactCompatWrapper",B={constructor:1,render:1,shouldComponentUpdate:1,componentWillReceiveProps:1,componentWillUpdate:1,componentDidUpdate:1,componentWillMount:1,componentDidMount:1,componentWillUnmount:1,componentDidUnmount:1},q=/^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/,J={},H=!1;try{H=!1}catch(e){}function G(){return null}var $=u("a",null).constructor;$.prototype.$$typeof=W,$.prototype.preactCompatUpgraded=!1,$.prototype.preactCompatNormalized=!1,Object.defineProperty($.prototype,"type",{get:function(){return this.nodeName},set:function(e){this.nodeName=e},configurable:!0}),Object.defineProperty($.prototype,"props",{get:function(){return this.attributes},set:function(e){this.attributes=e},configurable:!0});var X=i.event;i.event=function(e){return X&&(e=X(e)),e.persist=Object,e.nativeEvent=e,e};var Y=i.vnode;function Z(e,t,r){var n=t&&t._preactCompatRendered&&t._preactCompatRendered.base;n&&n.parentNode!==t&&(n=null),!n&&t&&(n=t.firstElementChild);for(var a=t.childNodes.length;a--;)t.childNodes[a]!==n&&t.removeChild(t.childNodes[a]);var o=I(e,t,n);return t&&(t._preactCompatRendered=o&&(o._component||{base:o})),"function"==typeof r&&r(),o&&o._component||o}i.vnode=function(e){if(!e.preactCompatUpgraded){e.preactCompatUpgraded=!0;var t=e.nodeName,r=e.attributes=null==e.attributes?{}:be({},e.attributes);"function"==typeof t?(!0===t[K]||t.prototype&&"isReactComponent"in t.prototype)&&(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(r.children=e.children),e.preactCompatNormalized||de(e),function(e){var t=e.nodeName,r=e.attributes;e.attributes={},t.defaultProps&&be(e.attributes,t.defaultProps);r&&be(e.attributes,r)}(e)):(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(r.children=e.children),r.defaultValue&&(r.value||0===r.value||(r.value=r.defaultValue),delete r.defaultValue),function(e,t){var r,n,a;if(t){for(a in t)if(r=q.test(a))break;if(r)for(a in n=e.attributes={},t)t.hasOwnProperty(a)&&(n[q.test(a)?a.replace(/([A-Z0-9])/,"-$1").toLowerCase():a]=t[a])}}(e,r))}Y&&Y(e)};var Q=function(){};function ee(e,t,r,n){var a=Z(u(Q,{context:e.context},t),r),o=a._component||a.base;return n&&n.call(o,a),o}function te(e){ee(this,e.vnode,e.container)}function re(e,t){return u(te,{vnode:e,container:t})}function ne(e){var t=e._preactCompatRendered&&e._preactCompatRendered.base;return!(!t||t.parentNode!==e)&&(I(u(G),e,t),!0)}Q.prototype.getChildContext=function(){return this.props.context},Q.prototype.render=function(e){return e.children[0]};var ae,oe=[],ie={map:function(e,t,r){return null==e?null:(e=ie.toArray(e),r&&r!==e&&(t=t.bind(r)),e.map(t))},forEach:function(e,t,r){if(null==e)return null;e=ie.toArray(e),r&&r!==e&&(t=t.bind(r)),e.forEach(t)},count:function(e){return e&&e.length||0},only:function(e){if(1!==(e=ie.toArray(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:function(e){return null==e?[]:oe.concat(e)}};function se(e){return pe.bind(null,e)}for(var le={},ue=z.length;ue--;)le[z[ue]]=se(z[ue]);function ce(e){var t=e[K];return t?!0===t?e:t:(t=function(e){return _e({displayName:e.displayName||e.name,render:function(){return e(this.props,this.context)}})}(e),Object.defineProperty(t,K,{configurable:!0,value:!0}),t.displayName=e.displayName,t.propTypes=e.propTypes,t.defaultProps=e.defaultProps,Object.defineProperty(e,K,{configurable:!0,value:t}),t)}function pe(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function e(t,r){for(var n=r||0;n<t.length;n++){var a=t[n];Array.isArray(a)?e(a):a&&"object"==typeof a&&!me(a)&&(a.props&&a.type||a.attributes&&a.nodeName||a.children)&&(t[n]=pe(a.type||a.nodeName,a.props||a.attributes,a.children))}}(e,2),de(u.apply(void 0,e))}function de(e){e.preactCompatNormalized=!0,function(e){var t=e.attributes||(e.attributes={});he.enumerable="className"in t,t.className&&(t.class=t.className);Object.defineProperty(t,"className",he)}(e),function(e){return"function"==typeof e&&!(e.prototype&&e.prototype.render)}(e.nodeName)&&(e.nodeName=ce(e.nodeName));var t=e.attributes.ref,r=t&&typeof t;return!ae||"string"!==r&&"number"!==r||(e.attributes.ref=function(e,t){return t._refProxies[e]||(t._refProxies[e]=function(r){t&&t.refs&&(t.refs[e]=r,null===r&&(delete t._refProxies[e],t=null))})}(t,ae)),function(e){var t=e.nodeName,r=e.attributes;if(!r||"string"!=typeof t)return;var n={};for(var a in r)n[a.toLowerCase()]=a;n.ondoubleclick&&(r.ondblclick=r[n.ondoubleclick],delete r[n.ondoubleclick]);if(n.onchange&&("textarea"===t||"input"===t.toLowerCase()&&!/^fil|che|rad/i.test(r.type))){var o=n.oninput||"oninput";r[o]||(r[o]=Pe([r[o],r[n.onchange]]),delete r[n.onchange])}}(e),e}function fe(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];if(!me(e))return e;var a=e.attributes||e.props,o=[u(e.nodeName||e.type,be({},a),e.children||a&&a.children),t];return r&&r.length?o.push(r):t&&t.children&&o.push(t.children),de(d.apply(void 0,o))}function me(e){return e&&(e instanceof $||e.$$typeof===W)}var he={configurable:!0,get:function(){return this.class},set:function(e){this.class=e}};function be(e,t){for(var r=arguments,n=1,a=void 0;n<arguments.length;n++)if(a=r[n])for(var o in a)a.hasOwnProperty(o)&&(e[o]=a[o]);return e}function ve(e,t){for(var r in e)if(!(r in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1}function ye(e){return e&&(e.base||1===e.nodeType&&e)||null}function ge(){}function _e(e){function t(e,t){!function(e){for(var t in e){var r=e[t];"function"!=typeof r||r.__bound||B.hasOwnProperty(t)||((e[t]=r.bind(e)).__bound=!0)}}(this),xe.call(this,e,t,J),Ee.call(this,e,t)}return(e=be({constructor:t},e)).mixins&&function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=Pe(t[r].concat(e[r]||oe),"getDefaultProps"===r||"getInitialState"===r||"getChildContext"===r))}(e,function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];for(var a in n)n.hasOwnProperty(a)&&"function"==typeof n[a]&&(t[a]||(t[a]=[])).push(n[a])}return t}(e.mixins)),e.statics&&be(t,e.statics),e.propTypes&&(t.propTypes=e.propTypes),e.defaultProps&&(t.defaultProps=e.defaultProps),e.getDefaultProps&&(t.defaultProps=e.getDefaultProps.call(t)),ge.prototype=xe.prototype,t.prototype=be(new ge,e),t.displayName=e.displayName||"Component",t}function ke(e,t,r){if("string"==typeof t&&(t=e.constructor.prototype[t]),"function"==typeof t)return t.apply(e,r)}function Pe(e,t){return function(){for(var r,n=arguments,a=0;a<e.length;a++){var o=ke(this,e[a],n);if(t&&null!=o)for(var i in r||(r={}),o)o.hasOwnProperty(i)&&(r[i]=o[i]);else void 0!==o&&(r=o)}return r}}function Ee(e,t){Ce.call(this,e,t),this.componentWillReceiveProps=Pe([Ce,this.componentWillReceiveProps||"componentWillReceiveProps"]),this.render=Pe([Ce,Se,this.render||"render",Ne])}function Ce(e,t){if(e){var r=e.children;if(r&&Array.isArray(r)&&1===r.length&&("string"==typeof r[0]||"function"==typeof r[0]||r[0]instanceof $)&&(e.children=r[0],e.children&&"object"==typeof e.children&&(e.children.length=1,e.children[0]=e.children)),H){var n="function"==typeof this?this:this.constructor,o=this.propTypes||n.propTypes,i=this.displayName||n.name;o&&a.a.checkPropTypes(o,e,"prop",i)}}}function Se(e){ae=this}function Ne(){ae===this&&(ae=null)}function xe(e,t,r){R.call(this,e,t),this.state=this.getInitialState?this.getInitialState():{},this.refs={},this._refProxies={},r!==J&&Ee.call(this,e,t)}function we(e,t){xe.call(this,e,t)}function Ae(e){e()}be(xe.prototype=new R,{constructor:xe,isReactComponent:{},replaceState:function(e,t){for(var r in this.setState(e,t),this.state)r in e||delete this.state[r]},getDOMNode:function(){return this.base},isMounted:function(){return!!this.base}}),ge.prototype=xe.prototype,we.prototype=new ge,we.prototype.isPureReactComponent=!0,we.prototype.shouldComponentUpdate=function(e,t){return ve(this.props,e)||ve(this.state,t)};var Fe={version:D,DOM:le,PropTypes:a.a,Children:ie,render:Z,createClass:_e,createPortal:re,createFactory:se,createElement:pe,cloneElement:fe,isValidElement:me,findDOMNode:ye,unmountComponentAtNode:ne,Component:xe,PureComponent:we,unstable_renderSubtreeIntoContainer:ee,unstable_batchedUpdates:Ae,__spread:be};t.default=Fe},function(e,t,r){e.exports=r(8)()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=0;function a(e){return l(u(s(e),8*e.length))}function o(e){for(var t,r=n?"0123456789ABCDEF":"0123456789abcdef",a="",o=0;o<e.length;o++)t=e.charCodeAt(o),a+=r.charAt(t>>>4&15)+r.charAt(15&t);return a}function i(e){for(var t,r,n="",a=-1;++a<e.length;)t=e.charCodeAt(a),r=a+1<e.length?e.charCodeAt(a+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),a++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function s(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function l(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(String.fromCharCode(e[r>>5]>>>r%32&255));return t.join("")}function u(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,a=-1732584194,o=271733878,i=0;i<e.length;i+=16){var s=r,l=n,u=a,c=o;r=p(r,n,a,o,e[i],7,-680876936),o=p(o,r,n,a,e[i+1],12,-389564586),a=p(a,o,r,n,e[i+2],17,606105819),n=p(n,a,o,r,e[i+3],22,-1044525330),r=p(r,n,a,o,e[i+4],7,-176418897),o=p(o,r,n,a,e[i+5],12,1200080426),a=p(a,o,r,n,e[i+6],17,-1473231341),n=p(n,a,o,r,e[i+7],22,-45705983),r=p(r,n,a,o,e[i+8],7,1770035416),o=p(o,r,n,a,e[i+9],12,-1958414417),a=p(a,o,r,n,e[i+10],17,-42063),n=p(n,a,o,r,e[i+11],22,-1990404162),r=p(r,n,a,o,e[i+12],7,1804603682),o=p(o,r,n,a,e[i+13],12,-40341101),a=p(a,o,r,n,e[i+14],17,-1502002290),n=p(n,a,o,r,e[i+15],22,1236535329),r=d(r,n,a,o,e[i+1],5,-165796510),o=d(o,r,n,a,e[i+6],9,-1069501632),a=d(a,o,r,n,e[i+11],14,643717713),n=d(n,a,o,r,e[i],20,-373897302),r=d(r,n,a,o,e[i+5],5,-701558691),o=d(o,r,n,a,e[i+10],9,38016083),a=d(a,o,r,n,e[i+15],14,-660478335),n=d(n,a,o,r,e[i+4],20,-405537848),r=d(r,n,a,o,e[i+9],5,568446438),o=d(o,r,n,a,e[i+14],9,-1019803690),a=d(a,o,r,n,e[i+3],14,-187363961),n=d(n,a,o,r,e[i+8],20,1163531501),r=d(r,n,a,o,e[i+13],5,-1444681467),o=d(o,r,n,a,e[i+2],9,-51403784),a=d(a,o,r,n,e[i+7],14,1735328473),n=d(n,a,o,r,e[i+12],20,-1926607734),r=f(r,n,a,o,e[i+5],4,-378558),o=f(o,r,n,a,e[i+8],11,-2022574463),a=f(a,o,r,n,e[i+11],16,1839030562),n=f(n,a,o,r,e[i+14],23,-35309556),r=f(r,n,a,o,e[i+1],4,-1530992060),o=f(o,r,n,a,e[i+4],11,1272893353),a=f(a,o,r,n,e[i+7],16,-155497632),n=f(n,a,o,r,e[i+10],23,-1094730640),r=f(r,n,a,o,e[i+13],4,681279174),o=f(o,r,n,a,e[i],11,-358537222),a=f(a,o,r,n,e[i+3],16,-722521979),n=f(n,a,o,r,e[i+6],23,76029189),r=f(r,n,a,o,e[i+9],4,-640364487),o=f(o,r,n,a,e[i+12],11,-421815835),a=f(a,o,r,n,e[i+15],16,530742520),n=f(n,a,o,r,e[i+2],23,-995338651),r=m(r,n,a,o,e[i],6,-198630844),o=m(o,r,n,a,e[i+7],10,1126891415),a=m(a,o,r,n,e[i+14],15,-1416354905),n=m(n,a,o,r,e[i+5],21,-57434055),r=m(r,n,a,o,e[i+12],6,1700485571),o=m(o,r,n,a,e[i+3],10,-1894986606),a=m(a,o,r,n,e[i+10],15,-1051523),n=m(n,a,o,r,e[i+1],21,-2054922799),r=m(r,n,a,o,e[i+8],6,1873313359),o=m(o,r,n,a,e[i+15],10,-30611744),a=m(a,o,r,n,e[i+6],15,-1560198380),n=m(n,a,o,r,e[i+13],21,1309151649),r=m(r,n,a,o,e[i+4],6,-145523070),o=m(o,r,n,a,e[i+11],10,-1120210379),a=m(a,o,r,n,e[i+2],15,718787259),n=m(n,a,o,r,e[i+9],21,-343485551),r=h(r,s),n=h(n,l),a=h(a,u),o=h(o,c)}return Array(r,n,a,o)}t.md5hash=function(e){return o(a(i(e)))};var c=function(e,t,r,n,a,o){return h(b(h(h(t,e),h(n,o)),a),r)},p=function(e,t,r,n,a,o,i){return c(t&r|~t&n,e,t,a,o,i)},d=function(e,t,r,n,a,o,i){return c(t&n|r&~n,e,t,a,o,i)},f=function(e,t,r,n,a,o,i){return c(t^r^n,e,t,a,o,i)},m=function(e,t,r,n,a,o,i){return c(r^(t|~n),e,t,a,o,i)},h=function(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r},b=function(e,t){return e<<t|e>>>32-t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.libreApi="https://libre.fm/api/",t.libre2_0="https://libre.fm/2.0/",t.connectApplicationLibreFm=function(e){return n.connectApplication(t.libreApi,e)};t.convertToLibreScrobbles=function(e){return e.map(function(e){return function(e,t,r,n,a,o,i){return{timestamp:e,track:t,artist:r,album:n,mbid:a,duration:o,trackNumber:i}}(e.uts,e.name,e.artist&&e.artist.name||"",e.album&&e.album.name,e.mbid,e.duration,e.trackNumber)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/([^&=]+)=?([^&]*)/g,a=function(e){return decodeURIComponent(e.replace(/\s+/g,""))};t.parseUrlParams=function(e){if(e){for(var t={},r=e.substring(1),o=void 0;o=n.exec(r);)t[a(o[1])]=a(o[2]);return t}return{}},t.getCurrentHostName=function(e){if(!e)return"";var t=e.location;return t&&t.hostname||""}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=r(2),i=r(10),s=r(6),l=document.getElementById("mount-point"),u=window?window.location:null,c=s.parseUrlParams(u?u.search:null);l&&o.render(a.createElement(i.App,n({},c)),l)},function(e,t,r){"use strict";var n=r(9);function a(){}e.exports=function(){function e(e,t,r,a,o,i){if(i!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return r.checkPropTypes=a,r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=r(11),s=r(12),l=r(13),u=r(14),c=r(1),p=r(5),d=r(0),f=r(15),m="r9i1y91hz71tcx7vyrp9hk1alhqp1888",h="21dsgf56dfg13df5g46sd85769gt45fd",b=200,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showTokenInstruction:!1,showSessionInstruction:!1,libreUsername:"",librePassword:"",libreApiKey:t.props.api_key_libre||m,libreToken:t.props.token||"",libreSecret:t.props.secret||h,libreSessionKey:t.props.sk||"",api_key:t.props.api_key||"e38cc7822bd7476fe4083e36ee69748e",api_method:u.apiMethodDefault,userLastFm:"",scrobbles:[],startpage:1,totalPages:-1,resultsPerPageLastFm:b,retrying:-1,url:null,errorMessage:null,xhr:null,showJson:!1},t}return n(t,e),t.prototype.fetchUrl=function(e,t,r){var n=this;void 0===r&&(r=-1),r>0?setTimeout(function(){n.state.url===e&&n.actuallyFetch(e,t,r)},1e3*r):this.actuallyFetch(e,t)},t.prototype.onErrorFetch=function(e,t,r,n,a){void 0===a&&(a=-1);var o=r?a>0?2*a:5:-1;this.setState({retrying:o,errorMessage:n}),r&&this.fetchUrl(t,e,o)},t.prototype.actuallyFetch=function(e,t,r){var n=this;void 0===r&&(r=-1),this.setState({retrying:-1,url:e});var a=function(a,o){return n.onErrorFetch(t,e,a,o,r)},o=this;c.makeGetRequest(e,function(){var r=JSON.parse(this.responseText);if(e===o.state.url)if(r.hasOwnProperty("error"))a("User not found"!==r.message,r.message);else{var n=r.recenttracks;if(n){var i=n.track;i&&i.length?t(n["@attr"].totalPages,i.map(l.parseRawScrobble),null):a(!1,"No tracks found")}else a(!1,"No tracks found")}},function(){e===o.state.url&&a(!0)})},t.prototype.startExportJson=function(e){var t=this.state.xhr;t&&t.abort(),this.setState({errorMessage:null,url:null,xhr:null,scrobbles:[]}),this.startExportJsonPage(this.state.startpage,e)},t.prototype.createScrobbleForm=function(e,t){var r=document.createElement("form");r.target=e,r.method="post",r.action=p.libre2_0;var n=document.createElement("input");n.type="submit",n.value="Retry scrobbling "+t.length+" tracks to Libre.fm",r.appendChild(n),d.createScrobbleFormData(p.convertToLibreScrobbles(t),this.state.libreApiKey,this.state.libreSessionKey,this.state.libreSecret).forEach(function(e,t){var n=document.createElement("input");n.type="hidden",n.value=e.toString(),n.name=t,r.appendChild(n)});var a=document.createElement("input");return a.type="hidden",a.value="json",a.name="format",r.appendChild(a),{form:r,submit:n}},t.prototype.pushToLibreFm=function(e,t,r){var n=this,a=document.getElementById("synchronize-scrobbles");if(a){var o=f.splitArray(t,50),i=document.createElement("div");a.appendChild(i),o.forEach(function(t,r){var a=document.createElement("div");a.style.width=100/o.length+"%",a.style.display="inline-block";var s=document.createElement("iframe");s.style.width="100%",s.style.display="block",s.style.height="96px";var l=e+"-"+(r+1);s.name=l;var u=n.createScrobbleForm(l,t),c=u.form,p=u.submit;c.style.width="100%",p.style.width="100%",a.appendChild(s),a.appendChild(c),i.appendChild(a),p.click()}),setTimeout(r,2e3)}else alert("No element found with id 'synchronize-scrobbles'")},t.prototype.startExportJsonPage=function(e,t){var r=this,n=u.createUrl(this.state.api_method,this.state.userLastFm,this.state.api_key,e,this.state.resultsPerPageLastFm),a=this.state.xhr;a&&a.abort(),this.setState({startpage:e,url:n,xhr:null}),this.fetchUrl(n,function(a,o,i){if(o&&n===r.state.url){var s=isFinite(r.state.totalPages)&&r.state.totalPages>0?r.state.totalPages:a;t?(r.setState({totalPages:s,url:void 0,retrying:-400,scrobbles:o}),r.pushToLibreFm(e,o,function(){e<s&&r.startExportJsonPage(e+1,t)})):(r.setState({totalPages:s,url:void 0,retrying:-200,scrobbles:r.state.scrobbles.concat(o)}),e<s&&r.startExportJsonPage(e+1,t))}})},t.prototype.render=function(){var e=this;return o.createElement("div",{id:"app-root"},o.createElement("section",null,o.createElement("h2",null,"Last.fm parameters"),o.createElement("div",{className:"api-parameters"},o.createElement(i.ApiParameter,{currentValue:this.state.userLastFm,defaultValue:"",title:"Username",htmlFor:"username-lastfm",onChange:function(t){e.setState({userLastFm:t.target.value})}},o.createElement("a",{className:(this.state.userLastFm?"visible":"hidden")+" api-parameter-cell xsmall",href:"https://www.last.fm/user/"+this.state.userLastFm},"Profile")),o.createElement(i.ApiParameter,{currentValue:this.state.api_key,defaultValue:this.props.api_key||"",title:"API key",htmlFor:"api-key-lastfm",onChange:function(t){e.setState({api_key:t.target.value})}},o.createElement("a",{className:"api-parameter-cell xsmall",href:"https://www.last.fm/api/account/create"},"Request API key")),o.createElement(i.ApiParameter,{currentValue:this.state.api_method,defaultValue:u.apiMethodDefault,title:"API method",htmlFor:"api-method-lastfm",onChange:function(t){e.setState({api_method:t.target.value})}}),o.createElement(i.ApiParameter,{currentValue:this.state.startpage,defaultValue:"1",title:"startpage",htmlFor:"api-startpage-lastfm",onChange:function(t){var r=parseInt(t.target.value),n=isFinite(r)?r:1/0;e.setState({startpage:n})}}),o.createElement(i.ApiParameter,{htmlFor:"api-lastpage-lastfm",title:"lastpage",defaultValue:"",currentValue:this.state.totalPages,onChange:function(t){var r=parseInt(t.target.value);e.setState({totalPages:isFinite(r)?r:1/0})}}),o.createElement(i.ApiParameter,{htmlFor:"api-results-per-page-lastfm",title:"Results per page (max 200)",defaultValue:b.toString(),currentValue:this.state.resultsPerPageLastFm,onChange:function(t){var r=parseInt(t.target.value),n=isFinite(r)?r:1/0,a=Math.min(n,b);e.setState({resultsPerPageLastFm:isFinite(a)&&a<=b?a:b})}})),o.createElement("div",{className:"all-set "+(this.state.userLastFm&&this.state.api_key?"visible":"hidden")},"✓ All Last.fm settings set")),o.createElement("section",null,o.createElement("h2",null,"Libre.fm settings"),o.createElement("div",{className:"api-parameters"},o.createElement(i.ApiParameter,{htmlFor:"api-key-libre",title:"API key",defaultValue:this.props.api_key_libre||m,currentValue:this.state.libreApiKey,onChange:function(t){var r=t.target.value;e.setState({libreApiKey:r})}}),o.createElement(i.ApiParameter,{htmlFor:"api-secret-libre",title:"Secret",defaultValue:this.props.secret||h,currentValue:this.state.libreSecret,onChange:function(t){e.setState({libreSecret:t.target.value})}}),o.createElement(i.ApiParameter,{id:"api-token-libre",htmlFor:"api-token-libre",title:"Token",defaultValue:this.props.token,currentValue:this.state.libreToken,onChange:function(t){e.setState({libreToken:t.target.value})}},o.createElement("form",{action:p.libre2_0,className:"api-parameter-cell",target:"myFrame",method:"post"},o.createElement("input",{type:"hidden",name:"method",value:"auth.getToken"}),o.createElement("input",{type:"hidden",name:"api_key",value:this.state.libreApiKey}),o.createElement("input",{type:"hidden",name:"format",value:"json"}),o.createElement("input",{type:"hidden",name:"api_sig",value:d.constructSignatureForParams([["api_key",this.state.libreApiKey],["method","auth.getToken"]],this.state.libreSecret)}),o.createElement("input",{value:"Create token",type:"submit",onClick:function(){e.setState({showTokenInstruction:!0})}}))),o.createElement("div",{className:"api-parameter"},o.createElement("span",{className:"instruction "+(this.state.showTokenInstruction?"visible":"hidden")},"Copy the token into the above field. So if the response is ",o.createElement("code",null,"{",'"token": "xyz"}'),", copy ",o.createElement("em",null,"xyz")," without the quotes.")),o.createElement("div",{className:"api-parameter"},o.createElement("iframe",{name:"myFrame",id:"myFrame",className:"frame-output api-parameter-cell "+(this.state.showTokenInstruction?"visible":"hidden")})),o.createElement("div",{className:"api-parameter"},o.createElement("form",{action:p.libreApi+"auth/",className:this.state.libreToken?"visible":"hidden",target:"_blank",method:"post"},o.createElement("input",{type:"hidden",name:"api_key",value:this.state.libreApiKey}),o.createElement("input",{type:"hidden",name:"token",value:this.state.libreToken}),o.createElement("input",{value:"Authorize this token to change your account",className:"btn-authorize-token btn-big",type:"submit"}))),o.createElement(i.ApiParameter,{htmlFor:"api-username-libre",title:"Username",defaultValue:"",currentValue:this.state.libreUsername,onChange:function(t){var r=t.target.value;e.setState({libreUsername:r})}},o.createElement("a",{className:(this.state.libreUsername?"visible":"hidden")+" api-parameter-cell xsmall",href:"https://libre.fm/user/"+this.state.libreUsername},"Profile")),o.createElement(i.ApiParameter,{id:"api-sk-libre",htmlFor:"api-sk-libre",title:"Session key",defaultValue:this.props.sk||"",currentValue:this.state.libreSessionKey,onChange:function(t){e.setState({libreSessionKey:t.target.value})}},o.createElement("form",{action:p.libre2_0,className:"api-parameter-cell "+(this.state.libreToken?"visible":"hidden"),target:"get-session-output",method:"post"},o.createElement("input",{type:"hidden",name:"method",value:"auth.getSession"}),o.createElement("input",{type:"hidden",name:"api_key",value:this.state.libreApiKey}),o.createElement("input",{type:"hidden",name:"token",value:this.state.libreToken}),o.createElement("input",{type:"hidden",name:"format",value:"json"}),o.createElement("input",{type:"hidden",name:"api_sig",value:d.constructSignatureForParams([["api_key",this.state.libreApiKey],["method","auth.getSession"],["token",this.state.libreToken]],this.state.libreSecret)}),o.createElement("input",{value:"Create session key",className:"btn-create-session",type:"submit",onClick:function(){e.setState({showSessionInstruction:!0})}})),o.createElement("div",{className:"api-parameter"},o.createElement("span",{className:"instruction "+(this.state.showSessionInstruction?"visible":"hidden")},"Copy the username and session key into the above field. So if the response is ","{",'"key": "xyz"}, copy ',o.createElement("em",null,"xyz")," without the quotes.")),o.createElement("iframe",{name:"get-session-output",className:"frame-output "+(this.state.showSessionInstruction?"visible":"hidden")})),o.createElement("div",{className:"all-set "+(this.state.libreApiKey&&this.state.libreUsername&&this.state.libreSecret&&this.state.libreSessionKey?"visible":"hidden")},"✓ All Libre.fm settings set"))),o.createElement(s.StatusLine,a({},this.state,{scrobbleNum:this.state.scrobbles.length})),o.createElement("section",{id:"synchronize-scrobbles",className:"subtitled"},o.createElement("h2",null,"Synchronize Last.fm scrobbles to Libre.fm"),o.createElement("div",{className:"xsmall subtitle"},o.createElement("p",null,"Scroll down the status windows to see if the scrobbles were succesful. Look for something like: ",o.createElement("code",null,'"@attr":',"{",'"accepted":"x","ignored":"y"}}}')),o.createElement("p",null,"You do not need to worry about tracks being scrobbled more than once. Duplicates are ignored automatically.")),o.createElement("div",{className:"api-parameters"},o.createElement(i.ApiParameter,{currentValue:this.state.startpage,defaultValue:"1",title:"Start on Last.fm 'Recently Listened' page",htmlFor:"api-startpage-lastfm",onChange:function(t){var r=parseInt(t.target.value),n=isFinite(r)?r:1/0;e.setState({startpage:n})}}),o.createElement(i.ApiParameter,{htmlFor:"api-lastpage-lastfm",title:"End on page (optional)",defaultValue:"",currentValue:this.state.totalPages,onChange:function(t){var r=parseInt(t.target.value);e.setState({totalPages:isFinite(r)?r:1/0})}})),o.createElement("button",{onClick:function(){var t=e.state,r=t.userLastFm,n=t.api_key,a=t.libreApiKey,o=t.libreUsername,i=t.libreSecret,s=t.libreSessionKey;r?n&&a&&o&&i&&s?e.startExportJson(!0):alert("Fill in usernames / API keys / session keys first"):alert("Fill in Last.fm usernames first")}},"Synchronize Last.fm scrobbles to Libre.fm")),o.createElement("section",null,o.createElement("h2",null,"Last.fm export only"),o.createElement("button",{className:"btn-export btn-big",onClick:function(){return e.startExportJson(!1)}},"Export Last.fm scrobbles"),o.createElement("div",null,o.createElement("input",{type:"checkbox",name:"show-output",defaultChecked:this.state.showJson,onChange:function(t){e.setState({showJson:t.target.checked})}}),o.createElement("label",{htmlFor:"show-output"},"Show output"),this.state.showJson?o.createElement("textarea",{className:"output-json",value:JSON.stringify(this.state.scrobbles)}):"")))},t}(o.PureComponent);t.App=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.ApiParameter=function(e){var t=e.id,r=e.children,a=e.defaultValue,o=e.currentValue,i=e.type,s=e.title,l=e.htmlFor,u=e.onChange;return n.createElement("div",{className:"api-parameter"},n.createElement("label",{className:"api-parameter-cell api-parameter-label "+function(e){return e?"label-input-set":"label-input-empty"}(o),htmlFor:l},s),n.createElement("input",{className:"mdc-text-field api-parameter-cell api-parameter-input",id:t||"",defaultValue:a,type:i||"text",name:l,onChange:u}),r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),a=function(e){var t=e.errorMessage,r=e.retrying;return t?r?n.createElement("div",{className:"status-line"},t,n.createElement("br",null),"Retrying in ",r," seconds"):n.createElement("div",{className:"status-line"},t):n.createElement("div",{className:"status-line"},"Retrying in ",r," seconds")};t.StatusLine=function(e){var t=e.errorMessage,r=e.url,o=e.retrying,i=e.startpage,s=e.totalPages,l=e.scrobbleNum,u=[],c=!t||o>=0;return-200===o?u.push(n.createElement("div",{key:"done",className:"status-line-page"},"Done! Received ",l," tracks.")):c&&(i>1||s>0)&&u.push(n.createElement("div",{key:"progress",className:"status-line-page"},i," / ",s," (",l," scrobbles so far)")),c&&r&&u.push(n.createElement("div",{key:"url",className:"status-line-url"},n.createElement("a",{href:r},r))),u.push(o>0?n.createElement(a,{key:"retrying",errorMessage:t,retrying:o}):t?n.createElement(a,{key:"retrying",errorMessage:t}):r?n.createElement("div",{key:"retrying",className:"status-line"},"Fetching ..."):n.createElement("div",{key:"retrying",className:"status-line"})),n.createElement("div",{className:"status"},u)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/[\0-\x08\x0b-\x1f]|\xef\xbf\xbe/g;t.sanitizeString=function(e){return e&&e.replace(n,"")},t.parseRawScrobble=function(e){return{artist:t.parseArtist(e.artist),name:t.sanitizeString(e.name||void 0),mbid:t.sanitizeString(e.mbid||void 0),duration:t.sanitizeString(e.duration||void 0),trackNumber:t.sanitizeString(e.trackNumber||void 0),album:o(e.album),uts:e.date&&e.date.uts||void 0}};var a=function(e){return e?{name:t.sanitizeString(e["#text"]||void 0),mbid:t.sanitizeString(e.mbid||void 0)}:void 0};t.parseArtist=function(e){return a(e)};var o=function(e){return a(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),a="https://ws.audioscrobbler.com/2.0/";t.apiMethodDefault="user.getrecenttracks",t.createUrl=function(e,t,r,n,a){return void 0===a&&(a=2),"https://ws.audioscrobbler.com/2.0/?method="+e+"&user="+t+"&api_key="+r+"&limit="+a+"&page="+n+"&format=json"},t.createSessionUrlLastFm=function(e,t,r){return n.createSessionUrl(a,e,t,r)},t.connectApplicationLastFm=function(e){return n.connectApplication("https://www.last.fm/api/",e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitArray=function(e,t){var r=[],n=[];return r.push(n),e.forEach(function(e){n.length>=t&&(n=[],r.push(n)),n.push(e)}),r}}])});
//# sourceMappingURL=app.js.map